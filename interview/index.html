<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试题 | 后来的后来の个人博客</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="assets/img/favicon.ico">
    <link rel="manifest" href="/wqpblog/manifest.json">
    <link rel="apple-touch-icon" href="/wqpblog/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/wqpblog/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="欢迎来到后来的后来の个人博客">
    <meta name="author" content="后来的后来">
    <meta name="keywords" content="vuepress ,后来的后来,houlaidehoulai,博客,blog">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/wqpblog/assets/css/0.styles.1ab949f2.css" as="style"><link rel="preload" href="/wqpblog/assets/js/app.3fedd56f.js" as="script"><link rel="preload" href="/wqpblog/assets/js/8.f7203bfb.js" as="script"><link rel="preload" href="/wqpblog/assets/js/2.bae677bb.js" as="script"><link rel="preload" href="/wqpblog/assets/js/5.0965dde3.js" as="script"><link rel="preload" href="/wqpblog/assets/js/3.c2a584cc.js" as="script"><link rel="prefetch" href="/wqpblog/assets/js/10.a6aaabec.js"><link rel="prefetch" href="/wqpblog/assets/js/11.2dffb2f3.js"><link rel="prefetch" href="/wqpblog/assets/js/12.7bed0eb7.js"><link rel="prefetch" href="/wqpblog/assets/js/13.444ca3ea.js"><link rel="prefetch" href="/wqpblog/assets/js/14.b435b594.js"><link rel="prefetch" href="/wqpblog/assets/js/15.58653fc2.js"><link rel="prefetch" href="/wqpblog/assets/js/16.1a169680.js"><link rel="prefetch" href="/wqpblog/assets/js/17.222da58b.js"><link rel="prefetch" href="/wqpblog/assets/js/18.0afd1c98.js"><link rel="prefetch" href="/wqpblog/assets/js/19.376536ee.js"><link rel="prefetch" href="/wqpblog/assets/js/20.58e59de3.js"><link rel="prefetch" href="/wqpblog/assets/js/21.57cdb735.js"><link rel="prefetch" href="/wqpblog/assets/js/22.aed53b90.js"><link rel="prefetch" href="/wqpblog/assets/js/23.0939af80.js"><link rel="prefetch" href="/wqpblog/assets/js/24.260c84e1.js"><link rel="prefetch" href="/wqpblog/assets/js/4.eed2e106.js"><link rel="prefetch" href="/wqpblog/assets/js/6.57611cc0.js"><link rel="prefetch" href="/wqpblog/assets/js/7.757f8de8.js"><link rel="prefetch" href="/wqpblog/assets/js/9.7683184d.js">
    <link rel="stylesheet" href="/wqpblog/assets/css/0.styles.1ab949f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wqpblog/" class="home-link router-link-active"><img src="/wqpblog/assets/img/hero.png" alt="后来的后来の个人博客" class="logo"> <span class="site-name can-hide">后来的后来の个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wqpblog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/wqpblog/basic/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/wqpblog/c_ss/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/wqpblog/jsup/" class="nav-link">
  JS高级
</a></div><div class="nav-item"><a href="/wqpblog/vue/" class="nav-link">
  框架
</a></div><div class="nav-item"><a href="/wqpblog/interview/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  面试题
</a></div><div class="nav-item"><a href="/wqpblog/about/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="https://github.com/geekJy-plus" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wqpblog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/wqpblog/basic/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/wqpblog/c_ss/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/wqpblog/jsup/" class="nav-link">
  JS高级
</a></div><div class="nav-item"><a href="/wqpblog/vue/" class="nav-link">
  框架
</a></div><div class="nav-item"><a href="/wqpblog/interview/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  面试题
</a></div><div class="nav-item"><a href="/wqpblog/about/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="https://github.com/geekJy-plus" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/wqpblog/interview/" aria-current="page" class="active sidebar-link">面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wqpblog/interview/#call原理" class="sidebar-link">call原理</a></li><li class="sidebar-sub-header"><a href="/wqpblog/interview/#变量提升、this" class="sidebar-link">变量提升、this</a></li><li class="sidebar-sub-header"><a href="/wqpblog/interview/#数据类型转换" class="sidebar-link">数据类型转换</a></li><li class="sidebar-sub-header"><a href="/wqpblog/interview/#函数三种角色" class="sidebar-link">函数三种角色</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="call原理"><a href="#call原理" class="header-anchor">#</a> call原理</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token function">fn1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn1<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span><span class="token function">prototype</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fn1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fn1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>首先回顾call的核心源码</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span><span class="token operator">...</span>params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//call核心源码</span>
    <span class="token keyword">let</span> key<span class="token operator">=</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> result<span class="token punctuation">;</span>
    context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    result<span class="token operator">=</span>context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>params<span class="token punctuation">)</span>
    <span class="token keyword">delete</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><ol><li><code>fn1.call(fn2)</code> 函数fn1是Function的实例，可通过原型链查找到Fucntion原型上的call方法，将call方法执行，call中的<code>this是fn1</code>，<code>context=&gt;fn2</code>,<code>fn2.xx=fn1</code>,<code>fn2.xx()</code>执行，执行的是fn1，让fn1中的this变为fn2 输出结果1</li> <li><code>fn1.call.call(fn2)</code> <code>fn1.call</code>是call函数，call函数执行call方法，call方法中this是call函数，context是fn2，<code>fn2.xx=call函数</code> ,<code>fn2.xx()</code>,让call函数执行，call函数中的this变为fn2，<code>this=fn2</code>，没有传参数context是window，<code>window.xx=fn2</code>，<code>window.xx()</code>,把fn2执行，让fn2中的this指向window，fn2执行输出2</li> <li><code>Function.prototype.call(fn1)</code> <code>this-&gt;Function.prototype(匿名空函数)</code>，<code>context-&gt;fn1</code>,<code>fn1.xx=匿名空函数</code>，<code>fn1.xx()</code>,把匿名空函数执行，让匿名空函数中的this为fn1，匿名空函数执行什么也不输出</li> <li><code>Function.prototype.call</code>是call函数，call方法中的this是call函数，context是fn1，<code>fn1.xx=call函数</code>，<code>fn1.xx()</code>执行就是call函数执行，并将call函数中的this变为fn1，<code>this-&gt;fn1</code>,<code>context-&gt;window</code>,<code>window.xx=fn1</code>,<code>window.xx()</code>就是fn1执行，fn1中this变为window</li></ol> <h2 id="变量提升、this"><a href="#变量提升、this" class="header-anchor">#</a> 变量提升、this</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    num<span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
    num<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">+=</span> n<span class="token punctuation">;</span>
        num<span class="token operator">++</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> obj<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//22</span>
<span class="token comment">//23</span>
<span class="token comment">//65 30</span>
</code></pre></div><p><img src="/wqpblog/assets/img/this.0764d053.png" alt=""></p> <ol><li>在全局执行上下文中<code>EC(G)</code>,在代码执行之前，首先对带<code>var</code>、<code>function</code>的进行变量提升，生成全局变量对象<code>VO(G)</code>,<code>num</code>,<code>obj</code>,<code>fun</code>,</li> <li>全局代码执行，变量提升过的不用重新创建，直接赋值，10赋给全局的num，对象<code>{num：20}</code>会开辟一个堆<code>(AAAFFF000)</code>，赋给obj</li> <li>自执行函数执行，先创建堆再执行,执行的返回结果赋值给<code>obj.fn</code>函数执行形成私有作用域<code>EC(AN)</code>,私有变量对象<code>AO(AN)</code>,代码执行之前初始化作用域链<code>&lt;EC(AN),EC(G)&gt;</code>,初始化<code>this：window</code>，形参赋值<code>num=obj.num=20</code>,这里没有变量提升</li> <li><code>EC(AN)</code>中代码执行，<code>this是window</code>，所以<code>VO(G)</code>中<code>num=20*3=60</code>，<code>AO(AN)</code>中<code>num=21</code>，返回结果是一个函数，所以开辟一个新的堆地址<code>(BBBFFF000)</code>，将地址赋给<code>obj.fn</code>，因为是在自执行函数中开辟的所以<code>(BBBFFF000)</code>作用域在<code>EC(AN)</code></li> <li>代码继续执行<code>fn</code>也指向<code>(BBBFFF000)</code>,<code>fn(5)</code>执行，形成私有作用域<code>AO(FN1)</code>,同样初始化作用域链<code>&lt;EC(FN1),EC(AN)&gt;</code>,初始化<code>this：window</code>，形参赋值<code>n=5</code>，没有变量提升，，代码执行<code>VO(G)</code>中<code>num=65</code>，由于当前作用域中没有<code>num</code>向上查找<code>AO(AN)</code>中<code>num=22</code>，此时输出<code>22</code></li> <li><code>obj.fn(10)</code>执行形成私有作用域<code>EC(FN2)</code>和私有变量对象<code>AO(FN2)</code>，同样初始化作用域链<code>&lt;EC(FN2),EC(AN)&gt;</code>,初始化<code>this：obj</code>形参赋值<code>n=10</code>，没有变量提升，代码执行<code>obj.num+=10,obj.num=30</code>,由于当前作用域中没有<code>num</code>向上查找<code>AO(AN)</code>中<code>num=23，输出23</code></li> <li>最后输出<code>num=65，obj.num=30</code></li></ol> <h2 id="数据类型转换"><a href="#数据类型转换" class="header-anchor">#</a> 数据类型转换</h2> <blockquote><p>加号在JS中不一定是数学运算，只要有一边出现字符串（或者对象【因为 数字+对象，理论上是把对象转换为数字进行运算，但是我们知道，对象转换为数字要先转换为字符串，这样在还没有转换为数字的时候，就遇到字符串了，变为字符串拼接】）都是要变为字符串拼接的</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;110&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;110&quot;  [10].toString()=&gt;&quot;10&quot;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token boolean">false</span> <span class="token operator">+</span> <span class="token keyword">undefined</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'Tencent'</span> <span class="token operator">+</span> <span class="token keyword">null</span> <span class="token operator">+</span> <span class="token boolean">true</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 10 + false =&gt; 10</span>
<span class="token comment">// 10 + undefined =&gt; NaN</span>
<span class="token comment">// NaN + [] =&gt; &quot;NaN&quot;</span>
<span class="token comment">// &quot;NaN&quot; + 'Tencent' =&gt; &quot;NaNTencent&quot;</span>
<span class="token comment">// ...</span>
<span class="token comment">// &quot;NaNTencentnulltrue[object Object]&quot;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token comment">// false   isNaN(Number(&quot;&quot;)) -&gt; isNaN(0)</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// NaN   parseInt(&quot;null&quot;)</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// false  isNaN(Number(null)) -&gt; isNaN(0)</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;12px&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 12</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;12px&quot;</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
<span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&quot;12px&quot;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;1.6px&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;1.2px&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">typeof</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token comment">// 1.6 + 1 + &quot;number&quot; =&gt; &quot;2.6number&quot;</span>
<span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;0.8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// parseInt(&quot;0.8&quot;) -&gt; 0</span>
<span class="token comment">// !!Number(0) -&gt; false</span>
<span class="token comment">// Number(false) -&gt; 0</span>
<span class="token comment">// isNaN(0) -&gt; false</span>
<span class="token keyword">typeof</span> <span class="token operator">!</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">!</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token comment">// https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence</span>
<span class="token comment">// typeof !parseInt(null) -&gt; &quot;boolean&quot;</span>
<span class="token comment">// !isNaN(null) -&gt; true</span>
<span class="token comment">// &quot;booleantrue&quot; </span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TRUE  </span>
<span class="token comment">// 规则：比较过程中，两边数据值不一样，都转换为数字再比较</span>
<span class="token comment">// 0 == 0</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TRUE</span>
<span class="token comment">// 规则：先算![] =&gt; false</span>
<span class="token comment">// false == false</span>
</code></pre></div><h3 id="变量提升"><a href="#变量提升" class="header-anchor">#</a> 变量提升</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * 全局上下文
 *   var x; 
 *   function func(x,y...){...};
 */</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token function-variable function">y</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">anonymous1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">/*
	 * 私有上下文EC(1) 
	 *   形参赋值:x=5  y=anonymous1
	 *   变量提升:--
	 */</span>
	x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">// 私有x=3</span>
	<span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">/* 
	 * anonymous1()  私有向下文EC(2)  
	 *    形参赋值:--
	 *    变量提升:--
	 * x = 2  让EC(1)上级上下文中的x=2
	 */</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;2</span>
<span class="token punctuation">}</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;1 </span>



<span class="token comment">/*
 * 如果同时符合了这两个条件:
 *   1. 形参有赋值默认值
 *   2. 函数体中有声明过变量 var/function...
 * 此时的函数执行会形成两个上下文
 *   1. 私有的上下文
 *   2. 函数体所在大括号中的块级上下文
 *   =&gt;函数体中遇到一个变量，我们首先看是否为块上下文中的变量，如果是接下来都操作块上下文中的变量和私有没关系，如果不是，操作的是私有的或者全局的...
 */</span>
 <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token function-variable function">y</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">anonymous1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 私有上下文 x=5 y=anonymous1</span>
	<span class="token comment">// 块级上下文 x=5</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;5 【块级】</span>
	<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// 块级中的x=3</span>
	<span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x = 2 私有中的x=2</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;3</span>
<span class="token punctuation">}</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;1 </span>


<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token function-variable function">y</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">anonymous1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 私有上下文 x=5 y=anonymous1</span>
	<span class="token comment">// 块级上下文 x=5 y=anonymous1  在还没有执行到指定代码之前，存储的值和私有上下文中的值是一样的</span>
	<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">// 块级上下文x=3</span>
	<span class="token keyword">var</span> <span class="token function-variable function">y</span><span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">anonymous2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">//块级上下文y=anonymous2</span>
	<span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// anonymous2()  x = 4  块级上下文中的x=4</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;4</span>
<span class="token punctuation">}</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;1 </span>
</code></pre></div><h2 id="函数三种角色"><a href="#函数三种角色" class="header-anchor">#</a> 函数三种角色</h2> <ol><li>普通函数（上下文/作用域/形参赋值/作用域链）</li> <li>构造函数（实例/原型/原型链）</li> <li>普通对象（属性名和属性值）</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/wqpblog/assets/img/functhree.6489d914.png" alt=""></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2020年8月5日星期三凌晨4点30分</span></div></footer> <!---->  <!----></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/wqpblog/assets/js/app.3fedd56f.js" defer></script><script src="/wqpblog/assets/js/8.f7203bfb.js" defer></script><script src="/wqpblog/assets/js/2.bae677bb.js" defer></script><script src="/wqpblog/assets/js/5.0965dde3.js" defer></script><script src="/wqpblog/assets/js/3.c2a584cc.js" defer></script>
  </body>
</html>
